<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home - SistemaCIM</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex h-screen bg-gray-100">
  <!-- Sidebar -->
  <aside class="w-64 bg-blue-900 text-white flex flex-col">
    <div class="flex items-center px-6 py-4">
      <img src="/public/images/cim_logo.jpg" alt="CIM Logo" class="h-10 mr-3"/>
      <span class="text-xl font-bold">SistemaCIM</span>
    </div>
    <div class="px-4">
      <div class="relative">
        <input type="text" placeholder="Pesquisar (Alt+2)" class="w-full rounded-full py-2 px-4 text-black"/>
        <button class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 16l-4-4m0 0l4-4m-4 4h18"/>
          </svg>
        </button>
      </div>
    </div>
    <nav class="mt-6 flex-1 overflow-y-auto">
      <a href="/home" class="block py-2 px-6 hover:bg-blue-800">Dashboard</a>
      <a href="/cadastro-cidade" class="block py-2 px-6 hover:bg-blue-800">Cadastrar Cidade</a>
      <a href="/cidades" class="block py-2 px-6 hover:bg-blue-800">Ver Cidades</a>
      <a href="/cadastro-usuario" class="block py-2 px-6 hover:bg-blue-800">Cadastrar Usuário</a>
      <a href="/usuarios" class="block py-2 px-6 hover:bg-blue-800">Ver Usuários</a>
      <a href="/relatorios" class="block py-2 px-6 hover:bg-blue-800">Relatórios</a>
    </nav>
    <div class="p-6 border-t border-blue-800">
      <button onclick="location.href='/logout'" class="w-full text-left">Sair</button>
    </div>
  </aside>

  <!-- Main content -->
  <main class="flex-1 p-6 overflow-y-auto">

  <div class="form-container">
    <h2>Editar Usuário</h2>
    <form action="/editar-usuario/<%= usuario.id %>" method="POST">
      <label for="nome_completo">Nome Completo</label>
      <input type="text" id="nome_completo" name="nome_completo" value="<%= usuario.nome_completo %>" required>

      <label for="cargo">Cargo</label>
      <input type="text" id="cargo" name="cargo" value="<%= usuario.cargo %>" required>

      <label for="cidade">Cidade</label>
      <select id="cidade" name="cidade" required>
        <option value="<%= usuario.cidade_id %>"><%= usuario.cidade %></option>
        <!-- As opções de cidade serão preenchidas dinamicamente -->
      </select>

      <label for="cpf">CPF</label>
      <input type="text" id="cpf" name="cpf" value="<%= usuario.cpf %>" required pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" title="CPF no formato 000.000.000-00">

      <label for="telefone">Telefone</label>
      <input type="text" id="telefone" name="telefone" value="<%= usuario.telefone %>" required>

      <label for="senha">Senha</label>
      <input type="password" id="senha" name="senha" value="<%= usuario.senha %>" required>

      <label for="perfil">Perfil</label>
      <select id="perfil" name="perfil" required>
        <option value="admin" <%= usuario.perfil === 'admin' ? 'selected' : '' %>>Admin</option>
        <option value="gestor" <%= usuario.perfil === 'gestor' ? 'selected' : '' %>>Gestor</option>
        <option value="usuario" <%= usuario.perfil === 'usuario' ? 'selected' : '' %>>Usuário</option>
      </select>

      <input type="submit" value="Atualizar Usuário">
    </form>
  </div>

</main>
</body>
</html>
